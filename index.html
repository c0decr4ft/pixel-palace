<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no">
    <title>PIXEL PALACE - Game Center</title>

    <!-- === SECURITY HEADERS === -->
    <!-- Content Security Policy: blocks XSS, unauthorized scripts, and data exfiltration -->
    <meta http-equiv="Content-Security-Policy" content="
        default-src 'none';
        script-src  'self' https://unpkg.com;
        style-src   'self' https://fonts.googleapis.com 'unsafe-inline';
        font-src    https://fonts.gstatic.com;
        img-src     'self' data:;
        connect-src 'self' https://*.peerjs.com wss://*.peerjs.com wss://*.peer.ooo https://unpkg.com;
        frame-src   'none';
        object-src  'none';
        base-uri    'self';
        form-action 'none';
    ">
    <!-- Prevent clickjacking ‚Äî disallow embedding in iframes -->
    <meta http-equiv="X-Frame-Options" content="DENY">
    <!-- Prevent MIME-type sniffing -->
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <!-- Referrer policy ‚Äî don't leak full URLs to external sites -->
    <meta name="referrer" content="no-referrer">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">

    <!-- PeerJS with Subresource Integrity ‚Äî guarantees the CDN file hasn't been tampered with -->
    <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"
            integrity="sha384-PMNj1TmCgXfW24/rfIyxYSAWwj2mffkMfguUWv08iNFcy0kTC0JN7E/tE+pJ7+fa"
            crossorigin="anonymous"></script>
</head>
<body>
    <div class="scanlines"></div>
    <div class="noise"></div>
    
    <header class="arcade-header">
        <div class="neon-sign">
            <h1 class="title glitch" data-text="PIXEL PALACE">PIXEL PALACE</h1>
            <p class="subtitle">INSERT COIN TO PLAY</p>
        </div>
        <div class="coin-counter">
            <span class="coins">‚àû</span> CREDITS
        </div>
    </header>

    <main class="game-lobby" id="lobby">
        <div class="category-tabs">
            <button class="tab active" data-category="all">ALL GAMES</button>
            <button class="tab" data-category="arcade">ARCADE</button>
            <button class="tab" data-category="puzzle">PUZZLE</button>
            <button class="tab" data-category="action">ACTION</button>
        </div>

        <div class="games-grid">
            <div class="game-cabinet" data-game="snake" data-category="arcade">
                <div class="cabinet-screen">
                    <div class="screen-content snake-preview">
                        <div class="snake-demo"></div>
                    </div>
                </div>
                <div class="cabinet-info">
                    <h3>SNAKE</h3>
                    <p>Eat & Grow</p>
                    <div class="difficulty">‚òÖ‚òÖ‚òÜ‚òÜ‚òÜ</div>
                </div>
                <button class="play-btn">PLAY</button>
            </div>

            <div class="game-cabinet" data-game="tetris" data-category="puzzle">
                <div class="cabinet-screen">
                    <div class="screen-content tetris-preview">
                        <div class="tetris-demo"></div>
                    </div>
                </div>
                <div class="cabinet-info">
                    <h3>TETRIS</h3>
                    <p>Stack Blocks</p>
                    <div class="difficulty">‚òÖ‚òÖ‚òÖ‚òÜ‚òÜ</div>
                </div>
                <button class="play-btn">PLAY</button>
            </div>

            <div class="game-cabinet" data-game="pong" data-category="arcade">
                <div class="cabinet-screen">
                    <div class="screen-content pong-preview">
                        <div class="pong-demo"></div>
                    </div>
                </div>
                <div class="cabinet-info">
                    <h3>PONG</h3>
                    <p>VS AI or Online</p>
                    <div class="difficulty">‚òÖ‚òÖ‚òÖ‚òÖ¬Ω</div>
                </div>
                <button class="play-btn">PLAY</button>
            </div>

            <div class="game-cabinet" data-game="tron" data-category="arcade">
                <div class="cabinet-screen">
                    <div class="screen-content tron-preview">
                        <div class="tron-demo"></div>
                    </div>
                </div>
                <div class="cabinet-info">
                    <h3>TRON</h3>
                    <p>VS AI or Online</p>
                    <div class="difficulty">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</div>
                </div>
                <button class="play-btn">PLAY</button>
            </div>

            <div class="game-cabinet" data-game="breakout" data-category="arcade">
                <div class="cabinet-screen">
                    <div class="screen-content breakout-preview">
                        <div class="breakout-demo"></div>
                    </div>
                </div>
                <div class="cabinet-info">
                    <h3>BREAKOUT</h3>
                    <p>Break Bricks</p>
                    <div class="difficulty">‚òÖ‚òÖ‚òÖ‚òÜ‚òÜ</div>
                </div>
                <button class="play-btn">PLAY</button>
            </div>

            <div class="game-cabinet" data-game="spaceinvaders" data-category="action">
                <div class="cabinet-screen">
                    <div class="screen-content space-preview">
                        <div class="space-row">
                            <span class="space-inv inv-a"></span>
                            <span class="space-inv inv-b"></span>
                            <span class="space-inv inv-a"></span>
                        </div>
                        <div class="space-row">
                            <span class="space-inv inv-c"></span>
                            <span class="space-inv inv-b"></span>
                            <span class="space-inv inv-c"></span>
                        </div>
                        <div class="space-ship"></div>
                    </div>
                </div>
                <div class="cabinet-info">
                    <h3>SPACE INVADERS</h3>
                    <p>Alien Attack</p>
                    <div class="difficulty">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</div>
                </div>
                <button class="play-btn">PLAY</button>
            </div>

            <div class="game-cabinet" data-game="memory" data-category="puzzle">
                <div class="cabinet-screen">
                    <div class="screen-content memory2-preview">
                        <div class="m2-grid">
                            <span class="m2-tile m2-on"></span>
                            <span class="m2-tile"></span>
                            <span class="m2-tile m2-on"></span>
                            <span class="m2-tile"></span>
                            <span class="m2-tile"></span>
                            <span class="m2-tile m2-on"></span>
                        </div>
                    </div>
                </div>
                <div class="cabinet-info">
                    <h3>MEMORY</h3>
                    <p>Decode Pairs</p>
                    <div class="difficulty">‚òÖ‚òÖ‚òÖ‚òÜ‚òÜ</div>
                </div>
                <button class="play-btn">PLAY</button>
            </div>

            <div class="game-cabinet" data-game="2048" data-category="puzzle">
                <div class="cabinet-screen">
                    <div class="screen-content puzzle-preview">
                        <div class="puzzle-demo">2048</div>
                    </div>
                </div>
                <div class="cabinet-info">
                    <h3>2048</h3>
                    <p>Merge Numbers</p>
                    <div class="difficulty">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</div>
                </div>
                <button class="play-btn">PLAY</button>
            </div>

            <div class="game-cabinet" data-game="tictactoe" data-category="puzzle">
                <div class="cabinet-screen">
                    <div class="screen-content ttt-preview">
                        <div class="ttt-grid">
                            <span class="ttt-x">X</span><span class="ttt-o">O</span><span class="ttt-x">X</span>
                            <span class="ttt-o">O</span><span class="ttt-x">X</span><span></span>
                            <span></span><span></span><span class="ttt-o">O</span>
                        </div>
                    </div>
                </div>
                <div class="cabinet-info">
                    <h3>TIC TAC TOE</h3>
                    <p>VS AI or Online</p>
                    <div class="difficulty">‚òÖ‚òÖ‚òÜ‚òÜ‚òÜ</div>
                </div>
                <button class="play-btn">PLAY</button>
            </div>

            <div class="game-cabinet" data-game="triangles" data-category="puzzle">
                <div class="cabinet-screen">
                    <div class="screen-content tri-preview">
                        <svg class="tri-demo" viewBox="0 0 80 70" fill="none">
                            <circle cx="10" cy="10" r="3" fill="#fff"/>
                            <circle cx="40" cy="10" r="3" fill="#fff"/>
                            <circle cx="70" cy="10" r="3" fill="#fff"/>
                            <circle cx="25" cy="40" r="3" fill="#fff"/>
                            <circle cx="55" cy="40" r="3" fill="#fff"/>
                            <circle cx="40" cy="65" r="3" fill="#fff"/>
                            <line x1="10" y1="10" x2="40" y2="10" stroke="#fff" stroke-width="2"/>
                            <line x1="40" y1="10" x2="25" y2="40" stroke="#fff" stroke-width="2"/>
                            <line x1="10" y1="10" x2="25" y2="40" stroke="#fff" stroke-width="2"/>
                            <line x1="40" y1="10" x2="70" y2="10" stroke="#0ff0fc" stroke-width="2"/>
                            <line x1="70" y1="10" x2="55" y2="40" stroke="#0ff0fc" stroke-width="2"/>
                            <line x1="40" y1="10" x2="55" y2="40" stroke="#0ff0fc" stroke-width="2"/>
                            <polygon points="10,10 40,10 25,40" fill="rgba(255,60,127,0.25)"/>
                            <polygon points="40,10 70,10 55,40" fill="rgba(0,255,252,0.25)"/>
                            <line x1="25" y1="40" x2="55" y2="40" stroke="rgba(255,255,255,0.2)" stroke-width="1" stroke-dasharray="3"/>
                        </svg>
                    </div>
                </div>
                <div class="cabinet-info">
                    <h3>DOTS & TRIANGLES</h3>
                    <p>VS AI or Online</p>
                    <div class="difficulty">‚òÖ‚òÖ‚òÖ‚òÜ‚òÜ</div>
                </div>
                <button class="play-btn">PLAY</button>
            </div>

            <div class="game-cabinet" data-game="racer" data-category="arcade">
                <div class="cabinet-screen">
                    <div class="screen-content racer-preview">
                        <div class="racer-road">
                            <div class="racer-lane-line"></div>
                            <div class="racer-lane-line"></div>
                            <div class="racer-lane-line"></div>
                            <div class="racer-car racer-player">‚ñ≤</div>
                            <div class="racer-car racer-traffic">‚ñº</div>
                        </div>
                    </div>
                </div>
                <div class="cabinet-info">
                    <h3>NEON RACER</h3>
                    <p>Dodge Traffic</p>
                    <div class="difficulty">‚òÖ‚òÖ‚òÖ‚òÜ‚òÜ</div>
                </div>
                <button class="play-btn">PLAY</button>
            </div>

        </div>
    </main>

    <div class="game-container" id="gameContainer">
        <div class="game-header">
            <button class="back-btn" id="backBtn">‚Üê LOBBY</button>
            <div class="game-title" id="currentGameTitle">GAME</div>
            <button class="pause-btn" id="pauseBtn" title="Pause (Esc)">‚è∏</button>
            <div class="score-display">SCORE: <span id="scoreValue">0</span></div>
        </div>
        <div class="pause-overlay" id="pauseOverlay">
            <div class="pause-content">
                <div class="pause-icon">‚è∏</div>
                <h2>PAUSED</h2>
                <p>Press ESC or tap to resume</p>
            </div>
        </div>
        <div class="game-play-area">
            <canvas id="gameCanvas"></canvas>
            <div id="touchControls" class="touch-controls" aria-hidden="true"></div>
        </div>
        <div class="game-controls" id="gameControls"></div>
    </div>

    <footer class="arcade-footer">
        <div class="marquee">
            <span>üéÆ WELCOME TO PIXEL PALACE üéÆ  PLAY RESPONSIBLY üïπÔ∏è</span>
        </div>
        <div class="credits">
            <span>CREATED BY</span>
            <a href="https://github.com/c0decr4ft" target="_blank" rel="noopener noreferrer" class="creator-name">c0decr4ft</a>
        </div>
        <div class="footer-audio-controls" aria-label="Sound settings">
            <button type="button" class="audio-toggle" id="sfxToggle" title="Sound effects (beeps, bounces)">
                <span class="audio-toggle-icon" aria-hidden="true">üîä</span>
                <span class="audio-toggle-label">SFX</span>
            </button>
            <button type="button" class="audio-toggle" id="musicToggle" title="Arcade background music">
                <span class="audio-toggle-icon" aria-hidden="true">üéµ</span>
                <span class="audio-toggle-label">Music</span>
            </button>
        </div>
    </footer>

    <script src="js/core.js"></script>
    <script src="js/games/snake.js"></script>
    <script src="js/games/tetris.js"></script>
    <script src="js/games/pong.js"></script>
    <script src="js/games/tron.js"></script>
    <script src="js/games/breakout.js"></script>
    <script src="js/games/spaceinvaders.js"></script>
    <script src="js/games/memory2.js"></script>
    <script src="js/games/2048.js"></script>
    <script src="js/games/tictactoe.js"></script>
    <script src="js/games/triangles.js"></script>
    <script src="js/games/racer.js"></script>
</body>
</html>
